#!/usr/bin/env ruby
# -*- ruby -*-

$: << File.expand_path("../../lib", __FILE__)
require 'rort'

active = Rort::Models::Respondent.filter do
  !:slug.nil? && :group == 'experiment'
end

Rort.logger(:warmup).info "Started warmup for #{active.count} respondents"

active.each do |res|
  Rort::Models::Person.fetch(res.slug).favorites.each do |fav|
    Rort::Queue.push([fav.slug, {:activities => :force}])
  end
end
