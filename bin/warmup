#!/usr/bin/env ruby
# -*- ruby -*-

$: << File.expand_path("../../lib", __FILE__)
require 'rort'

count = 0

Rort::Models::Respondent.each do |res|
  if res.slug
    Rort::Models::Person.fetch(res.slug).favorites.each do |fav|
      if Rort::Cache[fav.slug + ':activities']
        Rort::Cache.del(fav.slug + ':activities')
      end
      Rort::Queue.push(fav.slug)
    end
    count += 1
  end
end

Rort.logger(:warmup).info "Started warmup for #{count} requestors"
